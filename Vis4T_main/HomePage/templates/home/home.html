{% extends './layout.html'%} 
{% block main_body %} 
{% load static %}

<div class="main">
    <div class="content container">
            <div class="wrap-content">
                <div class="row">
                    <div class="wrap-info col-8">
                        <div class="info">
                            <h1 class="title" style="padding-top: 5px">
                                Thông tin giáo viên
                            </h1>
                            <div class="form">
                                <div class="row">
                                    <div class="avatar col-3">
                                        <div class="wrap-img">
                                            <img
                                                src="{% static 'home/images/testImages.png' %}"
                                                alt="vis4t"
                                            />
                                        </div>
                                    </div>
                                    <div class="listInfo col-9">
                                        <div class="form-group">
                                            <style>
                                                .row {
                                                    padding-top: 5px;
                                                }
                                            </style>
                                            <div class="row" style="padding-top: 0">
                                                <div class="col-6">
                                                    <label>
                                                        MSGV:
                                                        <span>{{teacher.teacher_id}}</span>
                                                    </label>
                                                </div>
                                                <div class="col-6">
                                                    <label>
                                                        Lớp chủ nhiệm:
                                                        <span id="class-name">{{classes.0.class_name}}</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-6">
                                                    <label>
                                                        Họ và tên:
                                                        <span>{{ teacher.fullname}}</span>
                                                    </label>
                                                </div>
                                                <div class="col-6">
                                                    <label>
                                                        SĐT:
                                                        <span>{{ teacher.phone_number }}</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-6">
                                                    <label>
                                                        Giới tính:
                                                        <span>
                                                            {% if teacher.sex == 'M' %}
                                                            Nam
                                                            {% else %}
                                                            Nữ
                                                            {% endif %}
                                                        </span>
                                                    </label>
                                                </div>
                                                <div class="col-6">
                                                    <label>
                                                        Trình độ:
                                                        <span>{{teacher.academic_title}}</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-6">
                                                    <label>
                                                        Năm sinh:
                                                        <span>{{teacher.year_of_birth}}</span>
                                                    </label>
                                                </div>
                                                <div class="col-6">
                                                    <label>
                                                        Chuyên ngành:
                                                        <span>{{teacher.major}}</span>
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="portlet col-4">
                        <div class="currentClass">
                            <p>Lớp hiện tại</p>
                            <div class="dropdown">
                                <button
                                    class="btn custom-btn btn-secondary dropdown-toggle"
                                    type="button"
                                    id="dropdownMenuButton"
                                    data-toggle="dropdown"
                                    aria-haspopup="true"
                                    aria-expanded="false"
                                >
                                    <span>{{classes.0.class_name}}</span>
                                </button>
                                <div
                                    class="dropdown-menu"
                                    aria-labelledby="dropdownMenuButton"
                                >
                                    {% for c in classes %}
                                    <a
                                        class="dropdown-item"
                                        href="#"
                                        id="{{c.class_name}} {{c.number_of_student}}"
                                    >{{c.class_name}}</a>

                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        <div class="class container">
                            <div class="row">
                                <div class="classInYear col-6">
                                    <div class="wrap">
                                        <p style="text-align: center">Sĩ số</p>
                                        <div>
                                            <span id="current-class-number">{{ classes.0.number_of_student}}</span>
                                            <span>
                                                <i class="fa-solid fa-people-group"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                <div class="totalClass col-6">
                                    <div class="wrap">
                                        <p>Số lượng lớp đang chủ nhiệm</p>
                                        <div>
                                            <span>{{classes|length}}</span>
                                            <span><i class="fa-solid fa-people-group"></i></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="wrap-options col-12">
                        <link rel="stylesheet" href="{% static 'home/css/options.css' %}" />
                        <div class="row">
                            <div class="col-2 ">
                            
                            </div>
                            <div class="col-2 ">
                                <div class="option-1 overall-btn active" id="overview" >
                                    <p>Tổng Quan</p>
                                    <div class="fa fa-pie-chart" style="font-size:48px;margin-top:7px;"></div>
                                </div>
                            </div>
                            <div class="col-2 ">
                                <div class="option-1 feature-btn-1" id="chart-to-class">
                                    <p>Biểu Đồ Theo Lớp</p>
                                    <div class="fa fa-bar-chart" style="font-size:48px;margin-top:7px;"></div>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="option-1 feature-btn-2" id="chart-to-student">
                                    <p>Biểu Đồ Theo Sinh Viên</p>
                                    <div class='far fa-id-badge' style='font-size:48px;margin-top:7px;'></div>
                                </div>
                            </div>
                            <div class="col-2">
                                <div class="option-1 feature-btn-3" id="course-book">
                                    <p>Cập Nhật Niên Giám</p>
                                    <div class="fa-sharp fa-solid fa-book" style='font-size:48px;margin-top:7px;'></div>
                                </div>
                            </div>
                            <div class="col-2">
                                
                            </div>
                        </div>
                    </div>
                    <div class="chart col-12" id="class-name">
                        <div class="overall atv col-12">
                            Tổng Quan
                        </div>
                        <div class="feature feature-1 col-12">
                            Biểu Đồ Theo Lớp
                        </div>
                        <div class="feature feature-2 col-12">
                            Biểu Đồ Theo Sinh Viên
                        </div>
                        <div class="feature feature-3 col-12">
                            Cập Nhật Niên Giám
                        </div>
                        <div class="arrow"></div>
                    </div>
                </div>
            </div>
        <button style="background-color: #ffffff;box-shadow: 0 1px 4px rgb(0 0 0 / 20%);border-radius: 8px;" type="button" class="btn btn-demo btn-sidebar" data-toggle="modal" data-target="#myModal">
            <i class="fa-solid fa-bars"></i>
        </button>

        
        

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                document.querySelectorAll(".dropdown-item").forEach((item) => {
                    item.onclick = () => {
                        [name, number] = item.id.split(" ")
                        document.querySelectorAll("#class-name").forEach((item) => {
                            item.innerHTML = name;
                        });
                        document.querySelector("#current-class-number").innerHTML =
                            number;
                            document.querySelector("#dropdownMenuButton").innerHTML = name;
                    };
                });
            });

            document.addEventListener("DOMContentLoaded", () => {
                const overallBtn = document.querySelector('.overall-btn')
                const overall = document.querySelector('.overall')
                const feature1 = document.querySelector('.feature-1')
                const feature2 = document.querySelector('.feature-2')
                const feature3 = document.querySelector('.feature-3')
                const featureBtn1 = document.querySelector('.feature-btn-1')
                const featureBtn2 = document.querySelector('.feature-btn-2')
                const featureBtn3 = document.querySelector('.feature-btn-3')
                const arrowEl = document.querySelector(".arrow")

                const chartPos = document.querySelector(".chart").getBoundingClientRect().left

                const posBtn = overallBtn.getBoundingClientRect()
                 let Y =posBtn.left
                 let w = posBtn.width
                 
                arrowEl.style.left = Y - chartPos + w / 2 - 7 + 'px' // lay mot nua :))

                overallBtn.onclick = (e) => {
                 const posBtn = overallBtn.getBoundingClientRect()
                 let Y =posBtn.left
                 let w = posBtn.width
                 
                arrowEl.style.left = Y - chartPos + w / 2 - 7 + 'px' // lay mot nua :))


                    setTimeout(() => {
                        window.scrollTo({
                        top: 0,
                        behavior: 'smooth' ,
                        })
                    },0)

                    

                    overallBtn.classList.add("active")
                    featureBtn1.classList.remove("active")
                    featureBtn2.classList.remove("active")
                    featureBtn3.classList.remove("active")

                    overall.classList.add("atv")
                    feature1.classList.remove("atv")
                    feature2.classList.remove("atv")
                    feature3.classList.remove("atv")
                }
                featureBtn1.onclick = (e) => {

                const posBtn = featureBtn1.getBoundingClientRect()
                 let Y =posBtn.left
                 let w = posBtn.width
                 
                 arrowEl.style.left = Y - chartPos + w / 2 - 7 + 'px' // lay mot nua :))

                    setTimeout(() => {
                        window.scrollTo({
                        top: 99999,
                        behavior: 'smooth',
                    })
                    },0)

                    

                    overallBtn.classList.remove("active")
                    featureBtn1.classList.add("active")
                    featureBtn2.classList.remove("active")
                    featureBtn3.classList.remove("active")

                    feature1.classList.add("atv")
                    overall.classList.remove("atv")
                    feature2.classList.remove("atv")
                    feature3.classList.remove("atv")
                  
                }
                featureBtn2.onclick = (e) => {

                    const posBtn = featureBtn2.getBoundingClientRect()
                 let Y =posBtn.left
                 let w = posBtn.width
                 
                 arrowEl.style.left = Y - chartPos + w / 2 - 7 + 'px' // lay mot nua :))

                    setTimeout(() => {
                        window.scrollTo({
                        top: 99999,
                        behavior: 'smooth',
                    })
                    },0)
                    

                    overallBtn.classList.remove("active")
                    featureBtn1.classList.remove("active")
                    featureBtn2.classList.add("active")
                    featureBtn3.classList.remove("active")

                    feature2.classList.add("atv")
                    overall.classList.remove("atv")
                    feature1.classList.remove("atv")
                    feature3.classList.remove("atv")
                  
                }
                featureBtn3.onclick = (e) => {

                    const posBtn = featureBtn3.getBoundingClientRect()
                 let Y =posBtn.left
                 let w = posBtn.width
                 
                 arrowEl.style.left = Y - chartPos + w / 2 - 7 + 'px' // lay mot nua :))
                    
                    setTimeout(() => {
                        window.scrollTo({
                        top: 99999,
                        behavior: 'smooth',
                    })
                    },0)
                

                    overallBtn.classList.remove("active")
                    featureBtn1.classList.remove("active")
                    featureBtn2.classList.remove("active")
                    featureBtn3.classList.add("active")

                    feature3.classList.add("atv")
                    overall.classList.remove("atv")
                    feature2.classList.remove("atv")
                    feature1.classList.remove("atv")
                  
                }
            });
            
        </script>
    </div>
</div>
{% endblock %}
